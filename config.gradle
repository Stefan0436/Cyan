// Main configuration file, shared across projects
// After these two comments, the first 10 lines should not contain code, they must be compatible with bash (ext. is stripped)
ext.minecraft="1.16.5"

ext.minmixin="0.7.10"
ext.mixinversion="0.8.3-SNAPSHOT"

ext.versionType="release"
ext.timeStartDev="2021-02-07T16:41:37+01:00"

ext.cyanversion="1.0.0.A11"

ext.timeRelease=OffsetDateTime.now().withNano(0).toString()

ext.forgeurltemplate="https://files.minecraftforge.net/maven/net/minecraftforge/forge/%game%-%forgeversion%/forge-%game%-%forgeversion%-installer.jar"

ext.modloader=""
gradle.allprojects {
	
	if (project.hasProperty("overrideGameVersion")) {
		ext.minecraft=project.getProperty("overrideGameVersion")
	}
	ext.exactgameversion=minecraft
	if (project.hasProperty("setModLoader")) {
		ext.modloader=project.getProperty("setModLoader")
	}
	if (project.hasProperty("setInheritsFromVersion")) {
		ext.exactgameversion=project.getProperty("setInheritsFromVersion")
	}
	if (project.hasProperty("overrideReleaseType")) {
		ext.versionType=project.getProperty("overrideReleaseType")
	}
	if (project.hasProperty("overrideMixinVersion")) {
		ext.mixinversion=project.getProperty("overrideMixinVersion")
	}
	if (project.hasProperty("overrideMinMixinVersion")) {
		ext.minmixin=project.getProperty("overrideMinMixinVersion")
	}
	
	ext.getCacheRoot = { ->
		return getGradle().getGradleUserHomeDir().listFiles(new FilenameFilter() {
	
			@Override
			public boolean accept(File file, String name) {
				if (name.equals("caches"))
					return true;
				return false;
			}
	
		})[0].getCanonicalFile();
	}	
    
}
